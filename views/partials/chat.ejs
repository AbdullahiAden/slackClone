<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <link rel="stylesheet" href="public/styles/style.css"> -->
  </head>

  <body>
    <div class="conversationTab">
      <div class="conversation-header">
        <!-- * check if there is any channels in db -->
        <% if (typeof data !='undefined' ) { %>
        <div><%= data[0].channelName %></div>
        <div id="channelId"><%= data[0]._id %></div>

        <% } %>

        <!-- * DM  -->

        <% if (typeof dmUsers !='undefined' ) { %> <%for (dmUser of dmUsers) {
        %>
        <div>FROM:__ <%= reqUser._id%></div>

        <div id="dmId"><%= reqParams %></div>

        <% } %> <% } %>
      </div>

      <!-- *MENTIONS --> 
      <div class="mentionsDiv">
        <% if (typeof mentions !='undefined' ) { %> 
          <%console.log(mentions) %>
          <!-- * getting each channels data  -->
          <% for(mention of mentions.conversation){ %>

            <!-- *  compare the user field with req.params   -->            
            <%if(mention.user ==reqParams ){ %>
               <div class="chat-messages">
               
                <% if (typeof reqUser !='undefined' ) { %> 
                  <div class="eachMessageDiv">
                  
                  <img class="userPic avatar" src="/uploads/<%=reqUser.profilePic %> " alt="">
                  <%=reqUser.name %> 
                  <div class="messageBlock"><%=mention.message %></div>
                  
                </div>
                <% } %> 
                
                  
                </div>
              
              
              
            <%} %>
             
          <% } %> 
        <% } %>
      </div>

      <div class="messagefield">
        
        <form id="form">
          <input name="newMessage" id="msg" autocomplete="off" />
          <button id="submit-msg">send</button>
        </form>
      </div>

      <div class="chat-messages">
        <!-- * new messages will appear  -->
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/public/scripts/main.js"></script>
    <script src="/public/scripts/dm.js"></script>
    <!-- <script src="/public/scripts/message.js"></script>  -->
  </body>
</html>
